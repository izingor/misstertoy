var V=Object.defineProperty;var A=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var D=(t,e,o)=>e in t?V(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,B=(t,e)=>{for(var o in e||(e={}))I.call(e,o)&&D(t,o,e[o]);if(A)for(var o of A(e))R.call(e,o)&&D(t,o,e[o]);return t};import{a as S,_ as p,o as a,c as d,w as y,v as h,b as l,d as b,F as k,r as F,t as T,e as _,f,g as m,h as x,i as U,j as L,k as E,l as O,C as q,m as j,P as M,n as J,p as H,q as z,s as Y}from"./vendor.6bbf3337.js";const W=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&i(n)}).observe(document,{childList:!0,subtree:!0});function o(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=o(s);fetch(s.href,r)}};W();const K={query:v,get:Q,post:G,put:Z,remove:ee,postMany:X};function v(t){var e=JSON.parse(localStorage.getItem(t))||[];return Promise.resolve(e)}function Q(t,e){return v(t).then(o=>o.find(i=>i._id===e))}function G(t,e){return e._id=te(),e.createdAt=new Date,v(t).then(o=>(o.push(e),w(t,o),e))}function X(t,e){return v(t).then(o=>(o.push(...e),w(t,o),o))}function Z(t,e){return v(t).then(o=>{const i=o.findIndex(s=>s._id===e._id);return o.splice(i,1,e),w(t,o),e})}function ee(t,e){return v(t).then(o=>{const i=o.findIndex(s=>s._id===e);return o.splice(i,1),w(t,o),o})}function w(t,e){localStorage.setItem(t,JSON.stringify(e))}function te(t=8){for(var e="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<t;i++)e+=o.charAt(Math.floor(Math.random()*o.length));return e}const oe="toysDB",N=["On wheels","Box game","Art","Baby","Doll","Puzzle","Outdoor"],$="//localhost:3030/api/toy/";function ne(t){return JSON.parse(JSON.stringify(t))}function se(){return S.get($)}function re(t){return K.get(oe,t)}function ie(t){return JSON.parse(JSON.stringify(t))._id?S.put($,t):S.post($,t)}function le(t){return S.delete($+t)}function ae(){return{name:null,price:null,type:null,inStock:!1,label:null}}function ce(){const t=JSON.parse(JSON.stringify(N));return t.push("All"),t}function de(t,e){return t.type==="price"&&e.sort((o,i)=>(o.price-i.price)*t.decending),t.type==="created"&&e.sort((o,i)=>(new Date(o.createdAt)-new Date(i.createdAt))*t.decending),t.type==="name"&&e.sort((o,i)=>o.name.localeCompare(i.name)*t.decending),e}function ue(t,e,o){let i,s;return t==="all"?i=o:t==="inStock"?i=o.filter(r=>r.inStock===!0):i=o.filter(r=>r.inStock===!1),e==="All"?s=i:s=i.filter(r=>r.label===e),s}const u={getEmptyToy:ae,query:se,save:ie,getById:re,remove:le,copyToy:ne,labelsForDisplay:ce,filterToys:ue,labels:N,sortToys:de};const ye={name:"toy-filter",emits:[],props:{},data(){return{filterBy:{txt:"",inStock:"all",label:"All"},labels:u.labelsForDisplay(),sortBy:{type:"name",decending:1}}},created(){},methods:{setFilter(){this.$store.commit({type:"setFilter",filterBy:B({},this.filterBy)})},sortToys(){this.$store.commit({type:"setSort",sortBy:B({},this.sortBy)})},decend(){this.sortBy.decending=this.sortBy.decending*-1,this.sortToys()}}},pe={class:"filter-container"},_e=_("In Stock "),me=l("option",{value:"all"},"All",-1),fe=l("option",{value:"inStock"},"In Stock",-1),he=l("option",{value:"missing"},"Missing",-1),ve=[me,fe,he],ge=_("Label "),Te=_("Sort By "),xe=l("option",{value:"price"},"Price",-1),be=l("option",{value:"name"},"Name",-1),Se=l("option",{value:"created"},"Created",-1),$e=[xe,be,Se],ke=_("Decending ");function we(t,e,o,i,s,r){return a(),d("div",pe,[y(l("input",{type:"text",placeholder:"Search",onInput:e[0]||(e[0]=(...n)=>r.setFilter&&r.setFilter(...n)),"onUpdate:modelValue":e[1]||(e[1]=n=>s.filterBy.txt=n)},null,544),[[h,s.filterBy.txt]]),l("label",null,[_e,y(l("select",{"onUpdate:modelValue":e[2]||(e[2]=n=>s.filterBy.inStock=n),onChange:e[3]||(e[3]=(...n)=>r.setFilter&&r.setFilter(...n))},ve,544),[[b,s.filterBy.inStock]])]),l("label",null,[ge,y(l("select",{onChange:e[4]||(e[4]=(...n)=>r.setFilter&&r.setFilter(...n)),"onUpdate:modelValue":e[5]||(e[5]=n=>s.filterBy.label=n)},[(a(!0),d(k,null,F(s.labels,n=>(a(),d("option",{key:n},T(n),1))),128))],544),[[b,s.filterBy.label]])]),l("label",null,[Te,y(l("select",{"onUpdate:modelValue":e[6]||(e[6]=n=>s.sortBy.type=n),onChange:e[7]||(e[7]=(...n)=>r.sortToys&&r.sortToys(...n))},$e,544),[[b,s.sortBy.type]]),l("label",null,[ke,l("input",{type:"checkbox",onChange:e[8]||(e[8]=(...n)=>r.decend&&r.decend(...n))},null,32)])])])}var Ce=p(ye,[["render",we]]);const Be={name:"toy-header",emits:[],props:{},data(){return{}},methods:{},components:{toyFilter:Ce}},Fe={class:"main-header flex align-items"},Ee={class:"flex space align-items main-layout"},Oe=l("div",{class:"logo"},[l("h3",null,"MISTERTOY")],-1),Ae={class:"wrapper"},De={class:"nav-bar flex space"},Pe=_("Home"),Le=_("About"),Ne=_("TOYS");function Ve(t,e,o,i,s,r){const n=f("toy-filter"),c=f("RouterLink");return a(),d("div",Fe,[l("div",Ee,[Oe,m(n),l("div",Ae,[l("nav",De,[m(c,{to:"/"},{default:x(()=>[Pe]),_:1}),m(c,{to:"/about"},{default:x(()=>[Le]),_:1}),m(c,{to:"/toys"},{default:x(()=>[Ne]),_:1})])])])])}var Ie=p(Be,[["render",Ve]]);const Re={},Ue={class:"main-footer flex align-items justify-content"},qe=l("h5",null,"Coffeerights",-1),je=[qe];function Me(t,e){return a(),d("div",Ue,je)}var Je=p(Re,[["render",Me]]);const He={components:{Header:Ie,Footer:Je}};function ze(t,e,o,i,s,r){const n=f("Header"),c=f("RouterView"),g=f("Footer");return a(),d(k,null,[m(n),m(c),m(g)],64)}var Ye=p(He,[["render",ze]]),We={strict:!0,state:{toys:null,filterBy:null,sortBy:null},getters:{toysForDisplay(t){if(!t.toys)return!1;if(!t.filterBy&&t.toys)return t.toys;{const e=new RegExp(t.filterBy.txt,"i");return u.filterToys(t.filterBy.inStock,t.filterBy.label,t.toys).filter(i=>e.test(i.name))}},toysForChart(t){if(!t.toys)return!1;const e=[];return u.labels.forEach(i=>{let s=t.toys.filter(r=>r.label===i&&r.inStock===!0);e.push(s.length)}),e}},mutations:{setToys(t,{toys:e}){t.toys=e},updateToy(t,{updatedToy:e}){const o=t.toys.findIndex(i=>i._id===e._id);t.toys.splice(o,1,e)},setFilter(t,{filterBy:e}){t.filterBy=e,console.log("state-filter",t.filterBy)},setSort(t,{sortBy:e}){t.sortBy=e,t.sortBy&&(t.toys=u.sortToys(t.sortBy,t.toys))},addToy(t,{toy:e}){t.toys.unshift(e)},removeToy(t,{id:e}){const o=t.toys.findIndex(i=>i._id===e);t.toys.splice(o,1)}},actions:{getToys(t){return u.query().then(e=>{t.commit({type:"setToys",toys:e.data})}).catch(e=>{console.log("Load error",e)})},addNewToy(t,{toy:e}){console.log("add new toy context",e),u.save(e).then(o=>{t.commit({type:"addToy",toy:o})})},removeToy(t,{id:e}){u.remove(e).then(()=>{t.commit({type:"removeToy",id:e})}).catch(o=>{console.error("Cannot remove todo: "+o.message)})},updateToy(t,{toy:e}){u.save(e).then(o=>t.commit({type:"updateToy",updatedToy:o.data}))}}};const Ke=U({strict:!0,state:{},getters:{},mutations:{},actions:{},modules:{toyStore:We}}),Qe="modulepreload",P={},Ge="/",Xe=function(e,o){return!o||o.length===0?e():Promise.all(o.map(i=>{if(i=`${Ge}${i}`,i in P)return;P[i]=!0;const s=i.endsWith(".css"),r=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${r}`))return;const n=document.createElement("link");if(n.rel=s?"stylesheet":Qe,s||(n.as="script",n.crossOrigin=""),n.href=i,document.head.appendChild(n),s)return new Promise((c,g)=>{n.addEventListener("load",c),n.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e())};const Ze={name:"home",data(){return{}},created(){},methods:{},computed:{},components:{}},et={class:"home-container main-app main-layout flex align-item justify-content"};function tt(t,e,o,i,s,r){return a(),d("main",et)}var ot=p(Ze,[["render",tt]]);const nt={name:"toy-edit",emits:["closeEdit"],props:{toy:{type:Object,required:!0}},data(){return{toyToEdit:u.copyToy(this.toy)}},methods:{updateToy(){this.$store.dispatch({type:"updateToy",toy:this.toyToEdit}),this.$emit("closeEdit")},exit(){this.$emit("closeEdit")}}},st={class:"edit-container flex column even"},rt=l("button",null,"Submit",-1);function it(t,e,o,i,s,r){return a(),d("div",st,[l("form",{onSubmit:e[3]||(e[3]=L((...n)=>r.updateToy&&r.updateToy(...n),["prevent"]))},[y(l("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=n=>s.toyToEdit.name=n),placeholder:"Name"},null,512),[[h,s.toyToEdit.name]]),y(l("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=n=>s.toyToEdit.price=n),placeholder:"Price"},null,512),[[h,s.toyToEdit.price]]),y(l("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=n=>s.toyToEdit.type=n),placeholder:"Type"},null,512),[[h,s.toyToEdit.type]]),rt],32),l("button",{onClick:e[4]||(e[4]=(...n)=>r.exit&&r.exit(...n))},"Exit")])}var lt=p(nt,[["render",it]]);const at={name:"toys-preview",emits:["removeToy"],props:{toys:{type:Object,required:!0}},data(){return{isEditOn:!1,toyForEdit:null}},methods:{remove(t){this.$emit("removeToy",t)},edit(t){this.toyForEdit=this.toys.find(e=>e._id===t),this.isEditOn=!this.isEditOn}},components:{editMode:lt}},ct=["onClick"],dt=["onClick"];function ut(t,e,o,i,s,r){const n=f("edit-mode");return a(!0),d(k,null,F(o.toys,c=>(a(),d("div",{key:c._id,class:"toy-preview flex column even"},[l("h3",null,T(c.name),1),l("h5",null,"Price:$"+T(c.price),1),l("h5",null,"Type:"+T(c.type),1),l("button",{onClick:g=>r.remove(c._id)},"Remove",8,ct),l("button",{onClick:g=>r.edit(c._id)},"Edit",8,dt),s.isEditOn?(a(),E(n,{key:0,toy:s.toyForEdit,onCloseEdit:r.edit},null,8,["toy","onCloseEdit"])):O("",!0)]))),128)}var yt=p(at,[["render",ut]]);const pt={name:"toys-list",emits:["removeToy"],props:{toys:{type:Array,required:!0}},data(){return{}},created(){},methods:{removeToy(t){this.$emit("removeToy",t)}},computed:{},components:{toysPreview:yt}},_t={class:"list-container flex main-app main-layout wrap align-items justify-content"};function mt(t,e,o,i,s,r){const n=f("toys-preview");return a(),d("div",_t,[m(n,{onRemoveToy:r.removeToy,toys:o.toys},null,8,["onRemoveToy","toys"])])}var ft=p(pt,[["render",mt]]);const ht={name:"toysApp",data(){return{}},created(){this.$store.dispatch({type:"getToys"}).then(()=>console.log("toys loaded successfully"))},methods:{removeToy(t){console.log(t),this.$store.dispatch({type:"removeToy",id:t})}},computed:{toysToShow(){return console.log(this.$store.state.toys),this.$store.getters.toysForDisplay}},components:{toysList:ft}},vt={class:"toys-app main-app main-layout flex column space justify-content align-items"},gt={class:"routes-container flex justify-content align-items space"},Tt=_("Add new toy"),xt=_("Toy charts");function bt(t,e,o,i,s,r){const n=f("router-link"),c=f("toys-list");return a(),d("main",vt,[l("div",gt,[m(n,{to:"/addtoy"},{default:x(()=>[Tt]),_:1}),m(n,{to:"/toycharts"},{default:x(()=>[xt]),_:1})]),r.toysToShow?(a(),E(c,{key:0,toys:r.toysToShow,onRemoveToy:r.removeToy},null,8,["toys","onRemoveToy"])):O("",!0)])}var St=p(ht,[["render",bt]]);const $t={name:"add-toy",emits:[],props:{},data(){return{newToy:u.getEmptyToy()}},created(){this.labels=u.labels},methods:{addToy(){console.log(this.newToy),this.$store.dispatch({type:"addNewToy",toy:this.newToy}),this.$router.push("/toys")},inStock(){this.newToy.inStock=!this.newToy.inStock}},components:{}},kt={class:"add-container main-app main-layout flex justify-content align-items"},wt=_("In Stock "),Ct=_("Toy Label "),Bt=l("button",null,"Add",-1);function Ft(t,e,o,i,s,r){return a(),d("div",kt,[l("form",{onSubmit:e[5]||(e[5]=L((...n)=>r.addToy&&r.addToy(...n),["prevent"])),class:"form-container flex column space"},[y(l("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=n=>s.newToy.name=n),placeholder:"Toy name"},null,512),[[h,s.newToy.name]]),y(l("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=n=>s.newToy.price=n),placeholder:"Price"},null,512),[[h,s.newToy.price]]),y(l("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=n=>s.newToy.type=n),placeholder:"type"},null,512),[[h,s.newToy.type]]),l("label",null,[wt,l("input",{type:"checkbox",onChange:e[3]||(e[3]=(...n)=>r.inStock&&r.inStock(...n)),placeholder:"Toy name"},null,32)]),l("label",null,[Ct,y(l("select",{"onUpdate:modelValue":e[4]||(e[4]=n=>s.newToy.label=n)},[(a(!0),d(k,null,F(t.labels,n=>(a(),d("option",{key:n},T(n),1))),128))],512),[[b,s.newToy.label]])]),Bt],32)])}var Et=p($t,[["render",Ft]]);q.register(...j);const Ot={components:{PieChart:M},data(){return{testData:{labels:["On wheels","Box game","Art","Baby","Doll","Puzzle","Outdoor"],datasets:[{data:this.$store.getters.toysForChart,backgroundColor:["#77CEFF","#0079AF","#5902EC","#97B0C4","#FFFA4D","#F2C9E1","#E04DB0"]}]}}},created(){},computed:{labelsCount(){return this.$store.getters.toysForChart}}},At={class:"chart-container main-app"},Dt=l("h1",null,"Toys in stock",-1);function Pt(t,e,o,i,s,r){const n=f("PieChart");return a(),d("div",At,[Dt,s.testData?(a(),E(n,{key:0,chartData:s.testData},null,8,["chartData"])):O("",!0)])}var Lt=p(Ot,[["render",Pt]]);const Nt=J({history:H("/"),routes:[{path:"/",name:"home",component:ot},{path:"/toys",name:"toys",component:St},{path:"/addtoy",name:"add-toy",component:Et},{path:"/about",name:"about",component:()=>Xe(()=>import("./toy-about.d687dd44.js"),["assets/toy-about.d687dd44.js","assets/toy-about.b87eaf3d.css","assets/vendor.6bbf3337.js","assets/vendor.7b2ec8d5.css"])},{path:"/toycharts",name:"toycharts",component:Lt}]});const C=z(Ye);C.use(Y,{load:{key:"AIzaSyBshrF2SW5c1FqFPoDUnBoIBpoQps7jU10"}});C.use(Nt);C.use(Ke);C.mount("#app");
